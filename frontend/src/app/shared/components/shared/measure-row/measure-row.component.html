<mat-accordion class="border-1 border-dark">
  <mat-expansion-panel class="outer-cards" [(expanded)]="open">
    <mat-expansion-panel-header>
      <mat-panel-title>
        <p class="fs-2 justify-content-center" data-testid="measure-row-title">Vergangene Messungen</p>
        <button
          *ngIf="!isMeasureForm"
          id="add-measure-button"
          class="create-button"
          mat-button
          color="primary"
          (click)="routeService.navigate('keyresults/' + keyResultId + '/measure/new')"
        >
          Messung hinzufügen
        </button>
      </mat-panel-title>
    </mat-expansion-panel-header>

    <div class="d-flex titles">
      <div class="d-flex w-10">
        <span class="key">Datum</span>
      </div>
      <div class="d-flex w-15">
        <span class="key">Aktueller Wert</span>
      </div>
      <div class="d-flex w-55">
        <span class="key">Veränderungen</span>
      </div>
      <div class="d-flex w-40">
        <span class="key">Massnahmen</span>
      </div>
    </div>
    <div *ngFor="let measure of measures$ | async">
      <mat-card class="measure-card inner-cards">
        <mat-card-content>
          <mat-panel-description class="d-flex space-between">
            <div class="d-flex w-10">
              <p class="value measureDate">
                {{ formatDate(measure.measureDate) }}
              </p>
            </div>
            <div class="d-flex justify-content-around w-10">
              <p class="value measureValue">
                {{ measure.value }}
              </p>
            </div>
            <div class="d-flex w-55">
              <p class="value measureChangeinfo">
                {{ measure.changeInfo }}
              </p>
            </div>
            <div class="d-flex w-40">
              <p class="value measureInitiatives">
                {{ measure.initiatives }}
              </p>
            </div>
            <img
              src="assets/edit-icon.svg"
              alt="edit-icon"
              class="edit-icon"
              (click)="routeService.navigate('/keyresults/' + measure.keyResultId + '/measure/edit/' + measure.id)"
            />
            <img
              src="assets/delete-icon.svg"
              (click)="openDeleteDialog(measure.id)"
              alt="delete-icon"
              class="delete-icon"
            />
          </mat-panel-description>
        </mat-card-content>
      </mat-card>
    </div>
  </mat-expansion-panel>
</mat-accordion>

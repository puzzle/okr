<div (click)="openObjectiveDetail()" role="button" class="objective rounded-3 bg-white">
  <span class="col">
    <img
      class="d-flex"
      src="assets/icons/objective-indicator.svg"
      alt="An indicator that indicates, that this is an objective"
    />
  </span>
  <div class="row mx-1">
    <section class="d-flex justify-content-between mb-3">
      <img
        alt="The objectives state"
        (click)="$event.stopPropagation()"
        matTooltip="The objectives state is {{ objective.value.state.split('-')[0] | uppercase }}"
        matTooltipPosition="above"
        data-testid="objective-state"
        class="icon col-1 mt-2"
        [src]="'assets/icons/' + objective.value.state"
      />
      <header class="title col-10 ps-2">{{ objective.value.title }}</header>

      <button
        [matMenuTriggerFor]="objectiveMenu"
        mat-icon-button
        class="p-0"
        (click)="$event.stopPropagation()"
        data-testid="objective-menu"
      >
        <img alt="objective options" class="col-1 icon" src="assets/icons/threedot.svg" />
      </button>
    </section>
    <section class="d-flex gap-3 px-3 flex-column">
      <button *ngFor="let keyResult of (objective | async)?.keyResults" class="border-0 p-0">
        <app-keyresult (click)="$event.stopPropagation()" [keyResult]="keyResult"></app-keyresult>
      </button>
    </section>
    <section class="py-3">
      <button mat-button color="primary" class="fw-bold" (click)="$event.stopPropagation(); openAddKeyResultDialog()">
        <img src="assets/icons/new-icon.svg" alt="Add key-result button" />
        Key Result hinzuf√ºgen
      </button>
    </section>
  </div>
</div>
<mat-menu class="pt-2 pb-2" #objectiveMenu="matMenu" xPosition="before" yPosition="below">
  <button mat-menu-item class="menu-option" (click)="redirect(menuEntry)" *ngFor="let menuEntry of menuEntries">
    {{ menuEntry.displayName }}
  </button>
</mat-menu>

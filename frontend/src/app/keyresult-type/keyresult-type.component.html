<div>
  <div class="d-flex">
    <div
      [style.cursor]="typeChangeAllowed ? 'pointer' : 'default'"
      [ngClass]="{ active: isMetric, 'non-active': !isMetric }"
      class="metric tab-title"
      (click)="switchKeyResultType('metric')"
    >
      Metrisch
    </div>
    <div
      [style.cursor]="typeChangeAllowed ? 'pointer' : 'default'"
      [ngClass]="{ active: !isMetric, 'non-active': isMetric }"
      class="ordinal tab-title"
      (click)="switchKeyResultType('ordinal')"
    >
      Ordinal
    </div>
    <div class="buffer tab-title flex-fill"></div>
  </div>
</div>

<div *ngIf="isMetric; else ordinalBlock">
  <form [formGroup]="typeForm" class="gap-1">
    <div class="d-flex flex-column">
      <div class="d-flex flex-row">
        <div class="flex-fill">
          <div class="d-flex gap-1">
            <div>
              <label>Einheit</label>
              <mat-form-field appearance="outline" class="input-fields">
                <mat-label>Einheit</mat-label>
                <mat-select [(value)]="typeForm.value.unit" (focusout)="emitData()">
                  <mat-option value="CHF">{{ "UNIT.CHF" | translate }}</mat-option>
                  <mat-option value="FTE">{{ "UNIT.FTE" | translate }}</mat-option>
                  <mat-option value="NUMBER">{{ "UNIT.NUMBER" | translate }}</mat-option>
                  <mat-option value="PERCENT">{{ "UNIT.PERCENT" | translate }}</mat-option>
                </mat-select>
              </mat-form-field>
              <div *ngIf="isTouchedOrDirty('unit')">
                <mat-error class="fw-bold" *ngFor="let errorKey of getErrorKeysOfFormField('unit')">
                  {{ errorMessages[errorKey.toUpperCase()] }}
                </mat-error>
              </div>
            </div>

            <div>
              <label>Baseline</label>
              <mat-form-field appearance="outline" class="input-fields"
                ><input matInput formControlName="baseline" placeholder="Baseline" (focusout)="emitData()" />
              </mat-form-field>
              <div *ngIf="isTouchedOrDirty('baseline')">
                <mat-error class="fw-bold" *ngFor="let errorKey of getErrorKeysOfFormField('baseline')">
                  {{ errorMessages[errorKey.toUpperCase()] }}
                </mat-error>
              </div>
            </div>
            <div>
              <label>Stretch Goal</label>
              <mat-form-field appearance="outline" class="input-fields"
                ><input matInput formControlName="stretchGoal" placeholder="Stretch Goal" (focusout)="emitData()"
              /></mat-form-field>
              <div *ngIf="isTouchedOrDirty('stretchGoal')">
                <mat-error class="fw-bold" *ngFor="let errorKey of getErrorKeysOfFormField('stretchGoal')">
                  {{ errorMessages[errorKey.toUpperCase()] }}
                </mat-error>
              </div>
            </div>
            <div>
              <label>Owner</label>
              <mat-form-field appearance="outline" class="input-fields"
                ><input matInput formControlName="owner" placeholder="Owner" />
              </mat-form-field>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>

<ng-template #ordinalBlock>
  <form [formGroup]="typeForm" class="gap-1">
    <div class="d-flex flex-column">
      <div class="d-flex flex-row">
        <div class="flex-fill">
          <div class="d-flex gap-1">
            <div>
              <label>Commit Zone</label>
              <mat-form-field appearance="outline" class="input-fields">
                <textarea
                  matInput
                  formControlName="commitZone"
                  placeholder="Commit Zone"
                  (focusout)="emitData()"
                ></textarea>
              </mat-form-field>
              <div *ngIf="isTouchedOrDirty('commitZone')">
                <mat-error class="fw-bold" *ngFor="let errorKey of getErrorKeysOfFormField('commitZone')">
                  {{ errorMessages[errorKey.toUpperCase()] }}
                </mat-error>
              </div>
            </div>

            <div>
              <label>Target Zone</label>
              <mat-form-field appearance="outline" class="input-fields">
                <textarea
                  matInput
                  formControlName="targetZone"
                  placeholder="Target Zone"
                  (focusout)="emitData()"
                ></textarea>
              </mat-form-field>
              <div *ngIf="isTouchedOrDirty('targetZone')">
                <mat-error class="fw-bold" *ngFor="let errorKey of getErrorKeysOfFormField('targetZone')">
                  {{ errorMessages[errorKey.toUpperCase()] }}
                </mat-error>
              </div>
            </div>
            <div>
              <label>Stretch Zone</label>
              <mat-form-field appearance="outline" class="input-fields">
                <textarea
                  matInput
                  formControlName="stretchZone"
                  placeholder="Stretch Zone"
                  (focusout)="emitData()"
                ></textarea>
              </mat-form-field>
              <div *ngIf="isTouchedOrDirty('stretchZone')">
                <mat-error class="fw-bold" *ngFor="let errorKey of getErrorKeysOfFormField('stretchZone')">
                  {{ errorMessages[errorKey.toUpperCase()] }}
                </mat-error>
              </div>
            </div>
            <div>
              <label>Owner</label>
              <mat-form-field appearance="outline" class="input-fields">
                <input matInput formControlName="owner" placeholder="Owner" />
              </mat-form-field>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</ng-template>

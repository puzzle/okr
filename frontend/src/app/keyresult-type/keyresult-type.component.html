<div>
  <div class="d-flex">
    <div [ngClass]="{'active': isMetric, 'non-active': !isMetric}" class="metric tab-title"
         (click)="switchKeyResultType('metric')">Metrisch
    </div>
    <div [ngClass]="{'active': !isMetric, 'non-active': isMetric}" class="ordinal tab-title"
         (click)="switchKeyResultType('ordinal')">Ordinal
    </div>
    <div class="buffer tab-title flex-fill"></div>
  </div>
</div>

<div *ngIf="isMetric; else ordinalBlock">
  <form [formGroup]="typeForm">
    <div class="d-flex flex-column">
      <div class="d-flex flex-row">
        <div class="flex-fill">
          <div class="d-flex justify-content-between">
            <span class="keyresult-type-label">
              <span class="text-small">Einheit</span>
            </span>
            <span class="keyresult-type-label">
              <span class="text-small">Baseline</span>
            </span>
            <span class="keyresult-type-label">
              <span class="text-small">Stretch Goal</span>
            </span>
            <span class="keyresult-type-label">
              <span class="text-small">Owner</span>
            </span>
          </div>

          <div class="d-flex">
            <div>
              <mat-form-field appearance="outline">
                <mat-label>Einheit w√§hlen</mat-label>
                <mat-select [(value)]="typeForm.value.unit" (focusout)="emitData()">
                  <mat-option value="CHF">{{ "UNIT.CHF" | translate }}</mat-option>
                  <mat-option value="FTE">{{ "UNIT.FTE" | translate }}</mat-option>
                  <mat-option value="NUMBER">{{ "UNIT.NUMBER" | translate }}</mat-option>
                  <mat-option value="PERCENT">{{ "UNIT.PERCENT" | translate }}</mat-option>
                </mat-select>
              </mat-form-field>
              <div *ngIf="isTouchedOrDirty('unit')">
                <mat-error class="fw-bold" *ngFor="let errorKey of getErrorKeysOfFormField('unit')">
                  {{ errorMessages[errorKey.toUpperCase()] }}
                </mat-error>
              </div>
            </div>

            <div>
              <mat-form-field appearance="outline"
              ><input matInput formControlName="baseline" placeholder="Baseline" (focusout)="emitData()"/>
              </mat-form-field>
              <div *ngIf="isTouchedOrDirty('baseline')">
                <mat-error class="fw-bold" *ngFor="let errorKey of getErrorKeysOfFormField('baseline')">
                  {{ errorMessages[errorKey.toUpperCase()] }}
                </mat-error>
              </div>
            </div>
            <div>
              <mat-form-field appearance="outline"
              ><input matInput formControlName="stretchGoal" placeholder="Stretch Goal" (focusout)="emitData()"
              /></mat-form-field>
              <div *ngIf="isTouchedOrDirty('stretchGoal')">
                <mat-error class="fw-bold" *ngFor="let errorKey of getErrorKeysOfFormField('stretchGoal')">
                  {{ errorMessages[errorKey.toUpperCase()] }}
                </mat-error>
              </div>
            </div>
            <div>
              <mat-form-field appearance="outline"
              ><input matInput formControlName="owner" placeholder="Owner"/>
              </mat-form-field>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>

<ng-template #ordinalBlock>
  <form [formGroup]="typeForm">
    <div class="d-flex flex-column">
      <div class="d-flex flex-row">
        <div class="flex-fill">
          <div class="d-flex justify-content-between">
            <span class="keyresult-type-label">
              <span class="text-small">Commit Zone</span>
            </span>
            <span class="keyresult-type-label">
              <span class="text-small">Target Zone</span>
            </span>
            <span class="keyresult-type-label">
              <span class="text-small">Stretch Zone</span>
            </span>
            <span class="keyresult-type-label">
              <span class="text-small">Owner</span>
            </span>
          </div>

          <div class="d-flex">
            <div>
              <mat-form-field appearance="outline">
                <textarea matInput formControlName="commitZone" placeholder="Commit Zone" (focusout)="emitData()"></textarea>
              </mat-form-field>
              <div *ngIf="isTouchedOrDirty('commitZone')">
                <mat-error class="fw-bold" *ngFor="let errorKey of getErrorKeysOfFormField('commitZone')">
                  {{ errorMessages[errorKey.toUpperCase()] }}
                </mat-error>
              </div>
            </div>

            <div>
              <mat-form-field appearance="outline">
                <textarea matInput formControlName="targetZone" placeholder="Target Zone" (focusout)="emitData()"></textarea>
              </mat-form-field>
              <div *ngIf="isTouchedOrDirty('targetZone')">
                <mat-error class="fw-bold" *ngFor="let errorKey of getErrorKeysOfFormField('targetZone')">
                  {{ errorMessages[errorKey.toUpperCase()] }}
                </mat-error>
              </div>
            </div>
            <div>
              <mat-form-field appearance="outline">
                <textarea matInput formControlName="stretchZone" placeholder="Stretch Zone" (focusout)="emitData()"></textarea>
              </mat-form-field>
              <div *ngIf="isTouchedOrDirty('stretchZone')">
                <mat-error class="fw-bold" *ngFor="let errorKey of getErrorKeysOfFormField('stretchZone')">
                  {{ errorMessages[errorKey.toUpperCase()] }}
                </mat-error>
              </div>
            </div>
            <div>
              <mat-form-field appearance="outline">
                <input matInput formControlName="owner" placeholder="Owner">
              </mat-form-field>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</ng-template>

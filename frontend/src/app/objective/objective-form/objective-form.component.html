<span class="d-flex back-btn">
  <mat-icon>chevron_left</mat-icon>
  <p (click)="navigateBack()">Zurück</p>
</span>

<p class="fs-2 heading-label">
  {{ this.create ? "Objective hinzufügen" : "Objective bearbeiten" }}
</p>
<div class="form-container">
  <div class="d-flex w-100">
    <form
      (ngSubmit)="save()"
      [formGroup]="objectiveForm"
      class="d-flex flex-column fit-content"
    >
      <div class="d-flex align-items-center gap-4 justify-content-end">
        <p class="fw-bold">Team</p>
        <mat-form-field
          appearance="outline"
          class="form-field-width form-field-height"
        >
          <mat-label>Team</mat-label>
          <mat-select
            [value]="(objectives$ | async)?.teamId"
            formControlName="teamId"
          >
            <mat-option *ngFor="let team of teams$ | async" [value]="team.id">
              {{ team.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="d-flex align-items-center justify-content-end gap-4">
        <p class="fw-bold">Titel</p>
        <mat-form-field
          appearance="outline"
          class="form-field-width form-field-height"
        >
          <mat-label>Titel</mat-label>
          <input
            [value]="(objectives$ | async)?.title"
            formControlName="title"
            matInput
            placeholder="Titel"
            type="text"
          />
        </mat-form-field>
      </div>

      <div class="d-flex align-items-center justify-content-end gap-4">
        <p class="fw-bold">Beschreibung</p>
        <mat-form-field appearance="outline" class="form-field-width">
          <mat-label>Beschreibung</mat-label>

          <textarea
            [value]="(objectives$ | async)?.description?.toString()"
            formControlName="description"
            matInput
            placeholder="Beschreibung"
            type="text"
          ></textarea>
        </mat-form-field>
      </div>

      <div class="d-flex align-items-center gap-4 justify-content-end">
        <p class="fw-bold">Besitzer</p>
        <mat-form-field
          appearance="outline"
          class="form-field-width form-field-height"
        >
          <mat-label>Besitzer</mat-label>
          <mat-select
            [value]="(objectives$ | async)?.ownerId"
            formControlName="ownerId"
          >
            <mat-option *ngFor="let user of users$ | async" [value]="user.id">
              {{ user.firstname + " " + user.lastname }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="d-flex align-items-center gap-4 justify-content-end">
        <p class="fw-bold">Zyklus</p>
        <mat-form-field
          appearance="outline"
          class="form-field-width form-field-height"
        >
          <mat-label>Zyklus</mat-label>
          <mat-select (selectionChange)="changeQuarterFilter($event.value)">
            <mat-option
              class="quarter-dropdown"
              *ngFor="let quarter of quarterList"
              [value]="quarter.quarter"
            >
              {{ quarter.quarter }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="d-flex gap-2 justify-content-end">
        <button
          (click)="navigateBack()"
          class="rounded-5"
          color="primary"
          mat-stroked-button
          type="reset"
        >
          Abbrechen
        </button>

        <button
          [disabled]="objectiveForm.invalid"
          class="rounded-5"
          color="primary"
          mat-raised-button
          type="submit"
        >
          {{ this.create ? "Erstellen" : "Aktualisieren" }}
        </button>
      </div>
    </form>
  </div>
</div>

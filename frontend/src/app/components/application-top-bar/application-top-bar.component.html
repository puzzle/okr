<div id="topBarHeight">
  <div id="okrTopbar">
    <a routerLink="/" queryParamsHandling="preserve" class="d-flex h-100 align-items-center ps-4">
      <img
        [attr.data-testId]="'logo'"
        alt="okr-logo"
        height="32"
        ngSrc="{{ this.logoSrc$ | async }}"
        width="140"
        priority
      />
    </a>
    <div class="d-flex align-items-center me-md-5 me-1">
      <button
        routerLink="team-management"
        [attr.data-testId]="'team-management'"
        class="topBarEntry btn visible-by-default"
        queryParamsHandling="preserve"
      >
        <mat-icon aria-hidden="false" aria-label="Group icon" fontIcon="group"></mat-icon>
        <span class="d-none d-md-flex">Teamverwaltung </span>
      </button>

      <button
        *ngIf="this.supportSiteUrl$ | async as supportSiteUrl"
        id="hilfeButton"
        class="topBarEntry btn"
        [attr.data-testId]="'help-button'"
        onclick="window.open(supportSiteUrl, '_blank')"
      >
        <mat-icon aria-hidden="false" aria-label="Help icon" fontIcon="help_outline"></mat-icon>
        <span class="d-none d-md-flex"> Hilfe </span>
      </button>

      <button
        (menuClosed)="menuIsOpen = false"
        (menuOpened)="menuIsOpen = true"
        [attr.data-testId]="'user-options'"
        [matMenuTriggerFor]="menu"
        class="topBarEntry flex-nowrap btn"
      >
        <mat-icon aria-hidden="false" aria-label="person icon" fontIcon="person_outline" id="topbar-user"></mat-icon>
        <span [attr.data-testId]="'user-name'" class="fw-normal fs-6 d-none d-md-flex">{{ userFullName }}</span>
        <mat-icon *ngIf="!menuIsOpen">expand_more</mat-icon>
        <mat-icon *ngIf="menuIsOpen">expand_less</mat-icon>
      </button>
    </div>

    <mat-menu #menu="matMenu" xPosition="before" yPosition="below">
      <button (click)="logOut()" [attr.data-testId]="'logout'" class="py-2" mat-menu-item>
        <mat-icon class="scale-9">exit_to_app</mat-icon>
        <span>Logout</span>
      </button>
    </mat-menu>
  </div>
</div>
